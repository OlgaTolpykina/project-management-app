<ng-container *transloco="let t">
  <div class="tasks-sidebar">
    <a routerLink="/main" class="tasks-sidebar_item">{{ t("allBoards") }}</a>
  </div>
  <div class="search-container">
    <div class="tasks-board">
      <p class="">
        {{ t("Search results") }}
      </p>
      <div class="sort-settings-container">
        <div class="sort-settings">
          {{ t("Sort by") }}:
          <button
            class="sort-button"
            [class.active]="searchService.sortSettings.sortBy === 'title'"
            (click)="searchService.sortSettings.sortBy = 'title'"
            (click)="searchService.sortFilteredSearchResult()"
          >
            {{ t("title") }}
          </button>
          <button
            class="sort-button"
            [class.active]="searchService.sortSettings.sortBy === 'order'"
            (click)="searchService.sortSettings.sortBy = 'order'"
            (click)="searchService.sortFilteredSearchResult()"
          >
            {{ t("Order") }}
          </button>
          <button
            class="sort-button"
            [class.active]="searchService.sortSettings.sortBy === 'description'"
            (click)="searchService.sortSettings.sortBy = 'description'"
            (click)="searchService.sortFilteredSearchResult()"
          >
            {{ t("Description") }}
          </button>
          <button
            class="sort-button"
            [class.active]="searchService.sortSettings.sortBy === 'userName'"
            (click)="searchService.sortSettings.sortBy = 'userName'"
            (click)="searchService.sortFilteredSearchResult()"
          >
            {{ t("User") }}
          </button>
        </div>
      </div>
    </div>
    <div
      class="search-result-container"
      *ngIf="searchService.searchString.length < searchService.MINIMAL_REQUEST_LENGTH"
    >
      <p>
        {{ t("search request length") }} {{ searchService.MINIMAL_REQUEST_LENGTH }} {{ t("chars") }}
      </p>
    </div>
    <div
      class="search-result-container"
      *ngIf="
        searchService.filteredSearchResult.length === 0 &&
        searchService.searchString.length >= searchService.MINIMAL_REQUEST_LENGTH
      "
    >
      <p>{{ t("Sorry, nothing matches.") }}</p>
      <p>{{ t("Try another search!") }}</p>
    </div>
    <div
      class="search-result-container"
      *ngIf="searchService.searchString.length >= searchService.MINIMAL_REQUEST_LENGTH"
    >
      <ng-container *ngFor="let task of searchService.filteredSearchResult">
        <div class="task-container" (click)="searchService.onSelect(task)">
          <div>
            <p class="task-header">{{ t("title") }}</p>
            {{ task.title }}
          </div>
          <div>
            <p class="task-header">{{ t("Description") }}</p>
            {{ task.description }}
          </div>
          <div class="">
            <p class="task-header">{{ t("User") }}</p>
            <span>{{ task.userName }}</span>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</ng-container>
